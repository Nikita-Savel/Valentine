<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>–í–∞–ª–µ–Ω—Ç–∏–Ω–∫–∞</title>

<style>
:root { --bg1:#ffe6f0; --bg2:#fff6fb; --card:#ffffffcc; }
* { box-sizing: border-box; }

body{
  margin:0;
  min-height:100vh;
  display:grid;
  place-items:center;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background: radial-gradient(circle at 20% 20%, var(--bg2), var(--bg1));
  overflow:hidden;
}

.card{
  width:min(680px, 92vw);
  padding:32px 26px;
  border-radius:24px;
  background:var(--card);
  backdrop-filter: blur(8px);
  box-shadow: 0 14px 45px rgba(0,0,0,.12);
  text-align:center;
  position:relative;
  z-index: 1;
  overflow: visible; /* –≤–∞–∂–Ω–æ: —á—Ç–æ–±—ã "–Ω–µ—Ç" –º–æ–≥–ª–∞ –≤—ã—Ö–æ–¥–∏—Ç—å –∑–∞ —Ä–∞–º–∫—É */
}

/* –ó–∞–≥–æ–ª–æ–≤–æ–∫: 1 —Å—Ç—Ä–æ–∫–∞, —Ä–æ–≤–Ω–æ */
h1{
  margin:0 0 22px;
  font-size: clamp(26px, 3.6vw, 40px);
  line-height:1.2;
  display:flex;
  justify-content:center;
  align-items:center;
  gap:12px;
  white-space:nowrap;
}

.options{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:18px;
}

/* —Ñ–∏–∫—Å–∏—Ä—É–µ–º 2 —è—á–µ–π–∫–∏ => "–¥–∞" –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å–¥–≤–∏–≥–∞–µ—Ç—Å—è */
.slot{
  width:170px;
  display:flex;
  justify-content:center;
  align-items:center;
}

.opt{
  display:inline-flex;
  justify-content:center;
  align-items:center;
  gap:10px;

  padding:12px 18px;
  border-radius:16px;
  border:2px solid rgba(0,0,0,.12);
  background:#fff;
  box-shadow: 0 6px 20px rgba(0,0,0,.06);
  cursor:pointer;
  font-size:20px;
  font-weight:600;
  user-select:none;
  white-space:nowrap;
}

.opt input{ width:20px; height:20px; cursor:pointer; }

/* –í–ê–ñ–ù–û: "–Ω–µ—Ç" –≤—Å–µ–≥–¥–∞ –ø–æ–≤–µ—Ä—Ö –≤—Å–µ–≥–æ –∏ –¥–≤–∏–≥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ transform'–æ–º */
#noBtn{
  position:relative;
  z-index: 999999;
  will-change: transform;
  transform: translate3d(0,0,0);
}

.heartBig{
  position:absolute;
  left:50%;
  top:48%;
  transform: translate(-50%, -50%) scale(0);
  font-size: clamp(64px, 9vw, 120px);
  opacity:0;
  transition:.2s ease;
  pointer-events:none;
}
.heartBig.show{
  transform: translate(-50%, -50%) scale(1);
  opacity:1;
}

.message{
  margin-top:22px;
  font-size: clamp(22px, 3vw, 32px);
  font-weight:700;
  opacity:0;
  transition:.35s ease;
}
.message.show{ opacity:1; }
</style>
</head>

<body>
<div class="card" id="card">
  <h1>–¢—ã –±—É–¥–µ—à—å –º–æ–µ–π –í–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ–π? üíò</h1>

  <div class="options" id="options">
    <div class="slot">
      <label class="opt">
        <input type="radio" name="ans" id="yes">
        –¥–∞
      </label>
    </div>

    <div class="slot">
      <label class="opt" id="noBtn">
        <input type="radio" name="ans" id="no">
        –Ω–µ—Ç
      </label>
    </div>
  </div>

  <div class="heartBig" id="heartBig">üíñ</div>
  <div class="message" id="message">–¢–µ–ø–µ—Ä—å —Ç—ã –º–æ—è –í–∞–ª–µ–Ω—Ç–∏–Ω–∫–∞ ‚ù§Ô∏è</div>
</div>

<script>
const card = document.getElementById("card");
const noBtn = document.getElementById("noBtn");
const noInput = document.getElementById("no");
const yes = document.getElementById("yes");
const options = document.getElementById("options");
const heartBig = document.getElementById("heartBig");
const message = document.getElementById("message");

// —Ç–µ–∫—É—â–∏–π —Å–¥–≤–∏–≥ (—á—Ç–æ–±—ã —É—á–∏—Ç—ã–≤–∞—Ç—å —É–∂–µ —Å–¥–µ–ª–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è)
let dx = 0, dy = 0;
let lock = false;

function clamp(v, min, max){ return Math.max(min, Math.min(max, v)); }
function randInt(min, maxInc){
  if (maxInc < min) return min;
  return min + Math.floor(Math.random() * (maxInc - min + 1));
}

function viewportSize(){
  const vw = document.documentElement.clientWidth  || window.innerWidth;
  const vh = document.documentElement.clientHeight || window.innerHeight;
  return { vw, vh };
}

function applyTransform(){
  noBtn.style.transform = `translate3d(${dx}px, ${dy}px, 0)`;
}

// –î–≤–∏–≥–∞–µ–º "–Ω–µ—Ç" —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω–∞ –±—ã–ª–∞ –í–´–®–ï –∫–∞—Ä—Ç–æ—á–∫–∏ (–∫–∞–∫ —Ç—ã –ø—Ä–æ—Å–∏–ª)
// –∏ –≤—Å–µ–≥–¥–∞ –≤–Ω—É—Ç—Ä–∏ —ç–∫—Ä–∞–Ω–∞
function moveNo(){
  const { vw, vh } = viewportSize();
  const pad = 16;

  const btnRect = noBtn.getBoundingClientRect();   // —Ç–µ–∫—É—â–∞—è –ø–æ–∑–∏—Ü–∏—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ (–£–ñ–ï —Å–æ —Å–¥–≤–∏–≥–æ–º)
  const cardRect = card.getBoundingClientRect();

  const w = Math.ceil(btnRect.width);
  const h = Math.ceil(btnRect.height);

  // —Ö–æ—Ç–∏–º –≤—ã–±—Ä–∞—Ç—å target (–∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–∞ —ç–∫—Ä–∞–Ω–µ)
  const minX = pad;
  const maxX = Math.max(minX, Math.floor(vw - w - pad));

  // —Ç–æ–ª—å–∫–æ –Ω–∞–¥ –∫–∞—Ä—Ç–æ—á–∫–æ–π
  const minY = pad;
  let maxY = Math.floor(cardRect.top - h - pad);
  maxY = Math.max(minY, maxY);

  const targetX = randInt(minX, maxX);
  const targetY = randInt(minY, maxY);

  // –ø–µ—Ä–µ–≤–æ–¥–∏–º target –≤ delta –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç–µ–∫—É—â–µ–≥–æ rect
  // (—Ç–∞–∫ –º—ã –ù–ï –º–µ–Ω—è–µ–º position ‚Äî —Ç–æ–ª—å–∫–æ transform)
  dx += (targetX - btnRect.left);
  dy += (targetY - btnRect.top);

  // —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞: –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –µ—â—ë —Ä–∞–∑ ‚Äú–ø—Ä–∏–∂–º—ë–º‚Äù, —á—Ç–æ–±—ã –Ω–µ –≤—ã–ª–µ–∑–ª–æ
  applyTransform();

  const after = noBtn.getBoundingClientRect();
  const fixX = clamp(after.left, minX, maxX) - after.left;
  const fixY = clamp(after.top,  minY, maxY) - after.top;

  dx += fixX;
  dy += fixY;
  applyTransform();
}

function runAway(e){
  if (e) { e.preventDefault(); e.stopPropagation(); }
  if (lock) return;
  lock = true;

  // —á—Ç–æ–±—ã –∫—É—Ä—Å–æ—Ä –Ω–µ ‚Äú—Ü–µ–ø–ª—è–ª‚Äù —Å–Ω–æ–≤–∞ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
  noBtn.style.pointerEvents = "none";

  requestAnimationFrame(() => {
    moveNo();
    setTimeout(() => {
      noBtn.style.pointerEvents = "auto";
      lock = false;
    }, 80);
  });
}

// –°—Ç–∞–±–∏–ª—å–Ω–æ –≤ Safari: pointerenter + pointerdown
noBtn.addEventListener("pointerenter", runAway, {passive:false});
noBtn.addEventListener("pointerdown", runAway, {passive:false});
noInput.addEventListener("click", runAway, {passive:false});

yes.addEventListener("change", ()=>{
  if (!yes.checked) return;

  heartBig.classList.add("show");
  setTimeout(()=>heartBig.classList.remove("show"), 200);

  options.style.display = "none";
  noBtn.style.display = "none";
  message.classList.add("show");
});

window.addEventListener("resize", () => {
  // –ø—Ä–∏ —Ä–µ—Å–∞–π–∑–µ –ø—Ä–æ—Å—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º, —á—Ç–æ "–Ω–µ—Ç" –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –≤–∏–¥–∏–º–æ–π (–µ—Å–ª–∏ –æ–Ω–∞ —É–∂–µ –±–µ–≥–∞–µ—Ç)
  // (—Ç—É—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–¥–Ω–æ–≥–æ moveNo, –æ–Ω –ø—Ä–∏–∂–º—ë—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã)
  if (noBtn.style.display === "none") return;
  requestAnimationFrame(() => {
    // –µ—Å–ª–∏ —É–∂–µ –¥–∞–ª–µ–∫–æ, –º—è–≥–∫–æ –≤–µ—Ä–Ω—É—Ç—å –≤ –±–µ–∑–æ–ø–∞—Å–Ω—É—é –æ–±–ª–∞—Å—Ç—å
    moveNo();
  });
});
</script>
</body>
</html>
